<div id="orders" class="page-layout carded fullwidth inner-scroll">

        <!-- TOP BACKGROUND -->
        <div class="top-bg accent"></div>
        <!-- / TOP BACKGROUND -->
    
        <!-- CENTER -->
        <div class="center" *ngIf="loaded">
    
            <!-- HEADER -->
            <div class="header accent"
                 fxLayout="column" fxLayoutAlign="center center"
                 >
    
                <!-- APP TITLE -->
                <div fxLayout="row" fxLayoutAlign="space-between" class="w-100-p mt-16 mb-24">
                <div class="logo"
                     fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon class="logo-icon mr-16" [@animate]="{value:'*',params:{delay:'50ms',scale:'0.2'}}">
                        event
                    </mat-icon>
                    <span class="logo-text h1" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">{{eventInfo.name}}</span>
                </div>
                <mat-menu #appMenu="matMenu">
                <button mat-menu-item *ngFor="let round of eventInfo.rounds; let i = index" (click)="changeRound(i)"> Round {{ i + 1 }}</button>
                <button mat-menu-item (click)="showWinners()"> Winners</button>
                </mat-menu>
                
                <button mat-raised-button [matMenuTriggerFor]="appMenu" class="mt-auto mb-auto primary">
                <mat-icon>more_vert</mat-icon>
                {{ this.round !== null ? 'Round' : ''}}  {{ this.round !== null ?  + this.round + 1 : 'Winners' }}
                </button>
                </div>
                <!-- / APP TITLE -->
                <div class="w-100-p mb-12" 
                fxLayout="row" 
                fxLayoutAlign="space-between"
                >
                <!-- SEARCH -->
                    <div class="search-input-wrapper ml-sm-16"
                    fxFlex="1 0 auto" fxLayout="row" fxLayoutAlign="start center">
                    <label for="search" class="mr-8">
                        <mat-icon class="secondary-text">search</mat-icon>
                    </label>
                    <mat-form-field floatLabel="never" fxFlex="1 0 auto">
                        <input matInput #filter (input)="searchInput.next($event.target.value)"
                        [placeholder]="type === 'solo' ? 'Email' : 'Captain Name'">
                    </mat-form-field>
                    </div>
                    <!-- / SEARCH -->
                    <button mat-flat-button (click)="enterNextRound()" *ngIf="canShortList()" class="mt-auto mb-auto primary">
                        {{ isRoundFinal() ? 'Declare winners' : 'Shortlist' }} 
                    </button>
                </div>
            </div>
            <!-- / HEADER -->
    
            <!-- CONTENT CARD -->
            <div class="content-card" *ngIf="selections && type==='solo'">
    
                <mat-table class="orders-table"
                           #table [dataSource]="filteredSelectionsPage" matSort (matSortChange)="sortInput($event)"
                           [@animateStagger]="{value:'50'}"
                           fusePerfectScrollbar *ngIf="filteredSelectionsPage.value.length !== 0">
    
                    <!-- SNo Column -->
                    <ng-container matColumnDef="Next_Round">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Next Round</mat-header-cell>
                        <mat-cell *matCellDef="let el">
                                <mat-checkbox class="example-margin" [(ngModel)]="nextRoundSelections[el.user.uid]" [disabled]="!canShortList()"></mat-checkbox>
                        </mat-cell>
                    </ng-container>
    
                    <!-- Name Column -->
                    <ng-container matColumnDef="name">
                        <mat-header-cell *matHeaderCellDef mat-sort-header >Name</mat-header-cell>
                        <mat-cell *matCellDef="let el">
                                <a mat-stroked-button [routerLink]='"/pages/users/profile"' 
                                [queryParams]="{uid : el.user.uid}" class="mb-4"
                                >{{el.user.name}}
                                </a>
                        </mat-cell>
                    </ng-container>
    
                    <!-- TCFID Column -->
                    <ng-container matColumnDef="tcfId" >
                        <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-md>TCF'ID</mat-header-cell>
                        <mat-cell *matCellDef="let el" fxHide fxShow.gt-md>
                            <p>
                                {{el.user.tcfId ? el.user.tcfId : '-'}}
                            </p>
                        </mat-cell>
                    </ng-container>
    
                    <!-- Email -->
                    <ng-container matColumnDef="email">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Email</mat-header-cell>
                        <mat-cell *matCellDef="let el">
                            <p>
                                {{el.user.email}}
                            </p>
                        </mat-cell>
                    </ng-container>
    
                    <!-- Is Native -->
                    <ng-container matColumnDef="native">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Native</mat-header-cell>
                        <mat-cell *matCellDef="let el">
                            <p>
                                <mat-icon>{{el.user.isNative ? 'check' : 'clear'}}</mat-icon>
                            </p>
                        </mat-cell>
                    </ng-container>
        
                    <!-- Date Column -->
                    <ng-container matColumnDef="date" >
                        <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-md>Registered At</mat-header-cell>
                        <mat-cell *matCellDef="let el" fxHide fxShow.gt-md>
                            <p class="text-truncate">
                                {{el.registeredAt | date:'short'}}
                            </p>
                        </mat-cell>
                    </ng-container>
    
                    <mat-header-row *matHeaderRowDef="type === 'solo' ? soloColumns : teamColumns; sticky:true"></mat-header-row>
    
                    <mat-row *matRowDef="let row; columns: 
                    type === 'solo' ? soloColumns : teamColumns"
                             class="order"
                             matRipple
                             >
                    </mat-row>
                </mat-table>
    
                <mat-paginator  *ngIf="filteredSelectionsPage.value.length !== 0"
                               [length]="pagesLength"
                               [pageIndex]="0"
                               [pageSize]="25"
                               [pageSizeOptions]="[1, 10, 25, 100]"
                               (page)="paginate($event)"
                               >
                </mat-paginator>
                <p  *ngIf="filteredSelectionsPage.value.length === 0" class="text-center warn-fg">No Data Available</p>

            </div>
            <!-- / CONTENT CARD -->

            <!-- CONTENT CARD -->
            <div class="content-card" *ngIf="selections && type==='team'">
    
                <mat-table class="orders-table"  *ngIf="filteredSelectionsPage.value.length !== 0"
                           #table [dataSource]="filteredSelectionsPage"
                           matSort (matSortChange)="sortInput($event)"
                           [@animateStagger]="{value:'50'}"
                           fusePerfectScrollbar>
    
                    <!-- SNo Column -->
                    <ng-container matColumnDef="Next_Round">
                        <mat-header-cell *matHeaderCellDef mat-sort-header >Next Round</mat-header-cell>
                        <mat-cell *matCellDef="let el; let i = index" >
                                <mat-checkbox class="example-margin" [(ngModel)]="nextRoundSelections[el.id]" [disabled]="!canShortList()"></mat-checkbox>

                        </mat-cell>
                    </ng-container>
    
                    <!-- Name Column -->
                    <ng-container matColumnDef="name">
                        <mat-header-cell *matHeaderCellDef mat-sort-header >Name</mat-header-cell>
                        <mat-cell *matCellDef="let el">
                            <p>{{el.name}}</p>
                        </mat-cell>
                    </ng-container>
    
                    <!-- TEAMID Column -->
                    <ng-container matColumnDef="teamId" >
                        <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-md>TEAM ID</mat-header-cell>
                        <mat-cell *matCellDef="let el" fxHide fxShow.gt-md>
                            <p>
                                {{el.id}}
                            </p>
                        </mat-cell>
                    </ng-container>
    
                    <!-- Captain -->
                    <ng-container matColumnDef="captain">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Captain</mat-header-cell>
                        <mat-cell *matCellDef="let el">
                            <p>
                               
                                <a mat-stroked-button routerLink='/pages/users/profile' 
                                [queryParams]="{uid : el.captainDetails.uid}" class="mb-4"
                                > {{el.captainDetails.name}}
                            </a>
                            </p>
                        </mat-cell>
                    </ng-container>
    
                    <!-- Members -->
                    <ng-container matColumnDef="members">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Members</mat-header-cell>
                        <mat-cell *matCellDef="let el">

                           <ul style="list-style: none; padding: 0;" *ngIf="el.memberDetails && el.memberDetails.length > 0; else noMember"
                           ><li *ngFor="let member of el.memberDetails"style="display: inline-block;">
                                <a  routerLink='/pages/users/profile' style="border:1px solid black;padding: 0.1em;margin-right: 0.1em;"
                                [queryParams]="{uid : member.uid}" class="mb-  fuse-black-fg"
                                >{{member.name}}
                            </a>
                            </li></ul>
                            <ng-template #noMember>
                                --
                            </ng-template>
                        </mat-cell>
                    </ng-container>
        
                    <!-- Date Column -->
                    <ng-container matColumnDef="date" >
                        <mat-header-cell *matHeaderCellDef mat-sort-header fxHide fxShow.gt-md>Registered At</mat-header-cell>
                        <mat-cell *matCellDef="let el" fxHide fxShow.gt-md>
                            <p class="text-truncate">
                                {{el.registeredAt | date:'short'}}
                            </p>
                        </mat-cell>
                    </ng-container>
    
                    <mat-header-row *matHeaderRowDef="type === 'solo' ? soloColumns : teamColumns; sticky:true"></mat-header-row>
    
                    <mat-row *matRowDef="let row; columns: 
                    type === 'solo' ? soloColumns : teamColumns"
                             class="order"
                             matRipple
                             >
                    </mat-row>
                </mat-table>
    
                <mat-paginator 
                *ngIf="filteredSelectionsPage.value.length !== 0"
                                (page)="paginate($event)"
                               [length]="pagesLength"
                               [pageIndex]="0"
                               [pageSize]="25"
                               [pageSizeOptions]="[1, 10, 25, 100]">
                </mat-paginator>
                <p  *ngIf="filteredSelectionsPage.value.length === 0" class="text-center warn-fg">No Data Available</p>
                
            </div>
            <!-- / CONTENT CARD -->
        </div>

      
        <!-- / CENTER -->
    </div>
    